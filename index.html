<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>挽留之王小石</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="挽留天涯挽留人,挽留岁月挽留你。它就是挽留,我就是使挽留的人,只看谁是要被挽留。">
<meta name="keywords" content="JavaScript,Angular,python,RxJS">
<meta property="og:type" content="website">
<meta property="og:title" content="挽留之王小石">
<meta property="og:url" content="http://blog.juphy.com/index.html">
<meta property="og:site_name" content="挽留之王小石">
<meta property="og:description" content="挽留天涯挽留人,挽留岁月挽留你。它就是挽留,我就是使挽留的人,只看谁是要被挽留。">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="挽留之王小石">
<meta name="twitter:description" content="挽留天涯挽留人,挽留岁月挽留你。它就是挽留,我就是使挽留的人,只看谁是要被挽留。">
  
    <link rel="alternate" href="/atom.xml" title="挽留之王小石" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">挽留之王小石</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Hello,world!</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://blog.juphy.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Angular组件通信" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/20/Angular组件通信/" class="article-date">
  <time datetime="2018-06-20T06:56:00.000Z" itemprop="datePublished">2018-06-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/20/Angular组件通信/">Angular组件通信</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="输入属性（父组件-gt-子组件）"><a href="#输入属性（父组件-gt-子组件）" class="headerlink" title="输入属性（父组件-&gt;子组件）"></a>输入属性（父组件-&gt;子组件）</h2><blockquote>
<p>@Input，自定义属性</p>
</blockquote>
<p>app.component.ts<br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Component &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: <span class="string">'exe-app'</span>,</span><br><span class="line">  template: `<span class="javascript"></span></span><br><span class="line"><span class="javascript">   &lt;exe-counter [count]=<span class="string">"initialCount"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">exe-counter</span>&gt;</span></span></span></span><br><span class="line"><span class="javascript">  </span>`</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppComponent</span> &#123;</span></span><br><span class="line">  initialCount: number = <span class="number">5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>counter.component.ts<br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Component, Input &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">    selector: <span class="string">'exe-counter'</span>,</span><br><span class="line">    template: `<span class="javascript"></span></span><br><span class="line"><span class="javascript">      &lt;p&gt;当前值: &#123;&#123; count &#125;&#125;&lt;<span class="regexp">/p&gt;</span></span></span><br><span class="line"><span class="javascript">      &lt;button (click)=<span class="string">"increment()"</span>&gt; + <span class="xml"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span></span><br><span class="line"><span class="javascript">      &lt;button (click)=<span class="string">"decrement()"</span>&gt; - <span class="xml"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span></span><br><span class="line"><span class="javascript">    </span>`</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">CounterComponent</span> &#123;</span></span><br><span class="line">    @Input() count: number = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    increment() &#123;</span><br><span class="line">        <span class="keyword">this</span>.count++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    decrement() &#123;</span><br><span class="line">        <span class="keyword">this</span>.count--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="输出属性（子组件-gt-父组件）"><a href="#输出属性（子组件-gt-父组件）" class="headerlink" title="输出属性（子组件-&gt;父组件）"></a>输出属性（子组件-&gt;父组件）</h2><blockquote>
<p>@Output()，自定义事件</p>
</blockquote>
<p>app.component.ts<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Component &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  selector: <span class="string">'exe-app'</span>,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">   &lt;p&gt;&#123;&#123;changeMsg&#125;&#125;&lt;/p&gt;</span></span><br><span class="line"><span class="string">   &lt;exe-counter [count]="initialCount"</span></span><br><span class="line"><span class="string">    (change)="countChange($event)"&gt;&lt;/exe-counter&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> AppComponent &#123;</span><br><span class="line">  initialCount: <span class="built_in">number</span> = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">  changeMsg: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">  countChange(event: <span class="built_in">number</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.changeMsg = <span class="string">`子组件change事件已触发，当前值是: <span class="subst">$&#123;event&#125;</span>`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 自定义事件change，接收发送过来的数据。</span></span><br></pre></td></tr></table></figure></p>
<p>counter.component.ts<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Component, Input, Output, EventEmitter &#125; from <span class="string">'@angular/core'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component(&#123;</span></span><br><span class="line"><span class="meta">    selector: <span class="meta-string">'exe-counter'</span>,</span></span><br><span class="line"><span class="meta">    template: `</span></span><br><span class="line"><span class="meta">      &lt;p&gt;当前值: &#123;&#123; count &#125;&#125;&lt;/p&gt;</span></span><br><span class="line"><span class="meta">      &lt;button (click)</span>=<span class="string">"increment()"</span>&gt; + &lt;/button&gt;</span><br><span class="line">      &lt;button (click)=<span class="string">"decrement()"</span>&gt; - &lt;/button&gt;</span><br><span class="line">    `</span><br><span class="line">&#125;)</span><br><span class="line">export <span class="class"><span class="keyword">class</span> <span class="title">CounterComponent</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Input()</span> count: number = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Output()</span> change: EventEmitter&lt;number&gt; = new EventEmitter&lt;number&gt;();</span><br><span class="line"></span><br><span class="line">    increment() &#123;</span><br><span class="line">        <span class="keyword">this</span>.count++;</span><br><span class="line">        <span class="keyword">this</span>.change.emit(<span class="keyword">this</span>.count);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    decrement() &#123;</span><br><span class="line">        <span class="keyword">this</span>.count--;</span><br><span class="line">        <span class="keyword">this</span>.change.emit(<span class="keyword">this</span>.count);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 当值改变时，通过事件发射数据接收。</span></span><br></pre></td></tr></table></figure></p>
<h2 id="双向绑定"><a href="#双向绑定" class="headerlink" title="双向绑定"></a>双向绑定</h2><blockquote>
<p>[()]，Angular的双向绑定</p>
</blockquote>
<p><em>通过修改绑定属性的方式，使用双向绑定即可，此时在子组件中只需要接收数据。</em></p>
<h2 id="模板变量"><a href="#模板变量" class="headerlink" title="模板变量"></a>模板变量</h2><blockquote>
<p>通过子组件标签的#name,则name就相当于子组件component。</p>
</blockquote>
<p>parent.component.ts<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;Component, OnInit&#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;ChildComponent&#125; <span class="keyword">from</span> <span class="string">'./child-component.ts'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  selector: <span class="string">'parent-component'</span>,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;child-component #child&gt;&lt;/child-component&gt;</span></span><br><span class="line"><span class="string">    &lt;button (click)="child.name = childName"&gt;设置子组件名称&lt;/button&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> ParentComponent <span class="keyword">implements</span> OnInit &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> childName: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"></span>) &#123; &#125;</span><br><span class="line"></span><br><span class="line">  ngOnInit() &#123;</span><br><span class="line">    <span class="keyword">this</span>.childName = <span class="string">'child-component'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>child.component.ts<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;Component&#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  selector: <span class="string">'child-component'</span>,</span><br><span class="line">  template: <span class="string">`I'm &#123;&#123; name &#125;&#125;`</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> ChildComponent &#123;</span><br><span class="line">  <span class="keyword">public</span> name: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="路由传参"><a href="#路由传参" class="headerlink" title="路由传参"></a>路由传参</h2><h3 id="在查询参数中传递参数"><a href="#在查询参数中传递参数" class="headerlink" title="在查询参数中传递参数"></a>在查询参数中传递参数</h3><p>传递参数页面<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">a</span> [<span class="attr">routerLink</span>]=<span class="string">"['/cinema-chain/cinema']"</span> [<span class="attr">queryParams</span>]=<span class="string">"</span></span></span><span class="template-variable">&#123;chain: 1&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span>查看影院<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p>
<p>点击跳转时，/cinema-chain/cinema?chain=1（?chain=1就是从路由里面传递过来的参数）。</p>
<p>接收参数的页面<br><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">constructor</span><span class="params">(<span class="keyword">private</span> activatedRoute: ActivatedRoute)</span> <span class="comment">&#123;</span></span></span><br><span class="line"><span class="function"><span class="comment">   const chain = this.activatedRoute.snapshot.queryParams['chain'];</span></span></span><br><span class="line"><span class="function"><span class="comment"> &#125;</span></span></span><br></pre></td></tr></table></figure></p>
<h3 id="在url路由路径中传递参数"><a href="#在url路由路径中传递参数" class="headerlink" title="在url路由路径中传递参数"></a>在url路由路径中传递参数</h3><p>在path中传递参数就需要先修改原有的路径使其可以携带参数。<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const <span class="string">routes:</span> Routes = [</span><br><span class="line">  &#123;<span class="string">path:</span> <span class="string">'main/:type'</span>, <span class="string">loadChildren:</span> <span class="string">'./index/index.module#IndexModule'</span>&#125;,</span><br><span class="line">  &#123;<span class="string">path:</span> <span class="string">'upload'</span>, <span class="string">loadChildren:</span> <span class="string">'./components/upload/upload.module#UploadModule'</span>&#125;,</span><br><span class="line">  &#123;<span class="string">path:</span> <span class="string">'operation'</span>, <span class="string">loadChildren:</span> <span class="string">'./components/operation/operation.module#OperationModule'</span>&#125;,</span><br><span class="line">  &#123;<span class="string">path:</span> <span class="string">'compare/:type'</span>, <span class="string">loadChildren:</span> <span class="string">'./components/compare/compare.module#CompareModule'</span>&#125;,</span><br><span class="line">  &#123;<span class="string">path:</span> <span class="string">'**'</span>, <span class="string">component:</span> PageNotFoundComponent&#125;,</span><br><span class="line">];</span><br><span class="line">整个路径被划分成两段变量</span><br></pre></td></tr></table></figure></p>
<p>传递参数页面<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;a [routerLink]=<span class="string">"['/home',2]"</span>&gt;主页&lt;/a&gt;</span><br><span class="line">这里的routerLink是一个数组，第一个值为路由的跳转路径，第二值为路由携带参数的值，这里传递的值为<span class="number">2</span></span><br><span class="line"></span><br><span class="line">或者这样传递</span><br><span class="line"> <span class="keyword">constructor</span>(<span class="keyword">private</span> router: Router) &#123;</span><br><span class="line">    <span class="keyword">this</span>.router.navigate([<span class="string">'/product'</span>,<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">this</span>.router.navigateByUrl(<span class="string">'/product/1'</span>);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p>
<p>页面跳转的结果：/home/2</p>
<p>接收参数页面<br><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">constructor</span><span class="params">(<span class="keyword">private</span> activatedRoute: ActivatedRoute)</span> <span class="comment">&#123;</span></span></span><br><span class="line"><span class="function"><span class="comment">   const chain = this.activatedRoute.snapshot.params['id'];</span></span></span><br><span class="line"><span class="function"><span class="comment"> &#125;</span></span></span><br></pre></td></tr></table></figure></p>
<p><em>不能同时使用参数查询方式和路由路径Url 方式传递同一个页面的参数，否则报错。</em></p>
<h3 id="参数快照和参数订阅"><a href="#参数快照和参数订阅" class="headerlink" title="参数快照和参数订阅"></a>参数快照和参数订阅</h3><p>参数快照：获取路由中传递的参数的值得一个方法就用到了参数快照snapshot。<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;a [routerLink]=<span class="string">"['/home',2]"</span>&gt;主页&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">change_id()&#123;</span><br><span class="line">  <span class="keyword">this</span>.router.navigate([<span class="string">'/home'</span>,<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line">路由路径中想<span class="built_in">home</span>同时传递了两个参数，<span class="number">1</span>和<span class="number">2</span></span><br></pre></td></tr></table></figure></p>
<p>当在页面第一次加载的时候会创建一次home，将2这个值传入页面，当点击按钮出发change_id事件的时候也会导航到home，但是在此之前主页已经被创建，并已经被赋值，此时导航到主页，主页并不会再次被创建，所以自然不会再次获取第二次导航过来的路由所携带的参数和值，但是路径变为了/home/1。</p>
<p>然而页面上的值仍然是2，获取当前路由所传递的参数值失败。这就是参数快照的弱点，为了解决这个问题引入了参数订阅：subscribe()。<br><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">constructor</span><span class="params">(<span class="keyword">private</span> activatedRoute: ActivatedRoute)</span> <span class="comment">&#123;</span></span></span><br><span class="line"><span class="function"><span class="comment">   this.activatedRoute.params.subscribe(params =&gt; &#123;</span></span></span><br><span class="line"><span class="function"><span class="comment">       const id = params['id'];</span></span></span><br><span class="line"><span class="function"><span class="comment">   &#125;</span>);</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p>
<p>采用参数订阅的方式subscribe()获取到一个类型为Params的属性params，并返回params里面的Id复制给本地变量homeID，这样就不会出现路径在变，但是页面里面的参数值不变的情况；</p>
<h2 id="ViewChild-装饰器"><a href="#ViewChild-装饰器" class="headerlink" title="@ViewChild 装饰器"></a>@ViewChild 装饰器</h2><blockquote>
<p>父组件获取子组件数据需要借助@ViewChild(),子组件直接引用。</p>
</blockquote>
<p>app.component.ts<br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Component, ViewChild, AfterViewInit &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ChildComponent &#125; <span class="keyword">from</span> <span class="string">'./child.component'</span>;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: <span class="string">'my-app'</span>,</span><br><span class="line">  template: `<span class="javascript"></span></span><br><span class="line"><span class="javascript">    &lt;h4&gt;Welcome to Angular World&lt;<span class="regexp">/h4&gt;</span></span></span><br><span class="line"><span class="javascript">    &lt;exe-child&gt;<span class="xml"><span class="tag">&lt;/<span class="name">exe-child</span>&gt;</span></span></span></span><br><span class="line"><span class="javascript">  </span>`,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppComponent</span> &#123;</span></span><br><span class="line">  title: number = <span class="number">123</span>;</span><br><span class="line">  @ViewChild(ChildComponent)</span><br><span class="line">  childCmp: ChildComponent;</span><br><span class="line"></span><br><span class="line">  ngAfterViewInit() &#123;</span><br><span class="line">    <span class="keyword">this</span>.childCmp.name = <span class="string">'child-component'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>child.component.ts<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Component, OnInit &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">    selector: <span class="string">'exe-child'</span>,</span><br><span class="line">    template: <span class="string">`</span></span><br><span class="line"><span class="string">      &lt;p&gt;Child Component&lt;/p&gt;</span></span><br><span class="line"><span class="string">    `</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> ChildComponent &#123;</span><br><span class="line">    name: <span class="built_in">string</span> = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params"><span class="keyword">private</span> appcomponent:AppComponent</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.appcomponent.title</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="基于RxJS-Subject"><a href="#基于RxJS-Subject" class="headerlink" title="基于RxJS Subject"></a>基于RxJS Subject</h2><p>message.service.ts<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;Injectable&#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;of&#125; <span class="keyword">from</span> <span class="string">'rxjs/observable/of'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;Subject&#125; <span class="keyword">from</span> <span class="string">'rxjs/Subject'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;Observable&#125; <span class="keyword">from</span> <span class="string">'rxjs/Observable'</span>;</span><br><span class="line"></span><br><span class="line">@Injectable()</span><br><span class="line">export <span class="keyword">class</span> MessageService &#123;</span><br><span class="line">  <span class="keyword">private</span> subject = <span class="keyword">new</span> Subject&lt;<span class="keyword">any</span>&gt;();</span><br><span class="line">  message: <span class="keyword">any</span>;</span><br><span class="line"></span><br><span class="line">  sendMessage(message: <span class="keyword">any</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.message = message;</span><br><span class="line">    <span class="keyword">this</span>.subject.<span class="keyword">next</span>(message);</span><br><span class="line">    <span class="keyword">this</span>.subject.complete();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  clearMessage() &#123;</span><br><span class="line">    <span class="keyword">this</span>.message = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">this</span>.subject.<span class="keyword">next</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getMessage(): Observable&lt;<span class="keyword">any</span>&gt; &#123;</span><br><span class="line">    <span class="comment">// return this.subject.asObservable(); // 数据一直在维持，会产生变化</span></span><br><span class="line">    <span class="keyword">return</span> of(<span class="keyword">this</span>.message); <span class="comment">// 数据值传递一次</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>home.component.ts<br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Component &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; MessageService &#125; <span class="keyword">from</span> <span class="string">'./message.service'</span>;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">    selector: <span class="string">'exe-home'</span>,</span><br><span class="line">    template: `<span class="javascript"></span></span><br><span class="line"><span class="javascript">    &lt;div&gt;</span></span><br><span class="line"><span class="javascript">        &lt;h1&gt;Home&lt;<span class="regexp">/h1&gt;</span></span></span><br><span class="line"><span class="javascript">        &lt;button (click)=<span class="string">"sendMessage()"</span>&gt;Send Message&lt;<span class="regexp">/button&gt;</span></span></span><br><span class="line"><span class="javascript">        &lt;button (click)=<span class="string">"clearMessage()"</span>&gt;Clear Message&lt;<span class="regexp">/button&gt;</span></span></span><br><span class="line"><span class="javascript">    &lt;<span class="regexp">/div&gt;</span></span>`</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">HomeComponent</span> &#123;</span></span><br><span class="line">    constructor(private messageService: MessageService) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    sendMessage(): void &#123;</span><br><span class="line">        <span class="keyword">this</span>.messageService.sendMessage(<span class="string">'Message from Home Component to App Component!'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    clearMessage(): void &#123;</span><br><span class="line">        <span class="keyword">this</span>.messageService.clearMessage();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>app.component.ts<br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Component, OnDestroy &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Subscription &#125; <span class="keyword">from</span> <span class="string">'rxjs/Subscription'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; MessageService &#125; <span class="keyword">from</span> <span class="string">'./message.service'</span>;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">    selector: <span class="string">'my-app'</span>,</span><br><span class="line">    template: `<span class="javascript"></span></span><br><span class="line"><span class="javascript">    &lt;div&gt;</span></span><br><span class="line"><span class="javascript">       &lt;div *ngIf=<span class="string">"message"</span>&gt;&#123;&#123;message.text&#125;&#125;&lt;<span class="regexp">/div&gt;</span></span></span><br><span class="line"><span class="javascript">       &lt;exe-home&gt;<span class="xml"><span class="tag">&lt;/<span class="name">exe-home</span>&gt;</span></span></span></span><br><span class="line"><span class="javascript">    &lt;<span class="regexp">/div&gt;</span></span></span><br><span class="line"><span class="javascript">    </span>`</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppComponent</span> <span class="title">implements</span> <span class="title">OnDestroy</span> &#123;</span></span><br><span class="line">    message: any;</span><br><span class="line">    subscription: Subscription;</span><br><span class="line"></span><br><span class="line">    constructor(private messageService: MessageService) &#123;</span><br><span class="line">        <span class="keyword">this</span>.subscription = <span class="keyword">this</span>.messageService</span><br><span class="line">                                  .getMessage().subscribe( message =&gt; &#123;</span><br><span class="line">                                      <span class="keyword">this</span>.message = message;</span><br><span class="line">                                 &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ngOnDestroy() &#123;</span><br><span class="line">        <span class="keyword">this</span>.subscription.unsubscribe();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><em>更多<a href="https://github.com/RxJS-CN" target="_blank" rel="noopener">RxJS知识</a></em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.juphy.com/2018/06/20/Angular组件通信/" data-id="cjkkiiu8w0018awtuddv6ub61" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Angular/">Angular</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-SheetJS" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/19/SheetJS/" class="article-date">
  <time datetime="2018-06-18T16:00:00.000Z" itemprop="datePublished">2018-06-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/19/SheetJS/">SheetJS</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ul>
<li><p>直接使用</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">"javascript"</span> <span class="attr">src</span>=<span class="string">"xlsx.full.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使用npm</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">npm</span> instal xlsx</span><br></pre></td></tr></table></figure>
</li>
<li><p>老版本浏览器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- add the shim first --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"shim.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- after the shim is referenced, add the library --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"xlsx.full.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Angular-2"><a href="#Angular-2" class="headerlink" title="Angular 2+"></a>Angular 2+</h2><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> XLSX <span class="keyword">from</span> <span class="string">'xlsx'</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>sheet_to_json</p>
</blockquote>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* &lt;input type="file" (change)="onFileChange($event)" multiple="false" /&gt; */</span></span><br><span class="line"></span><br><span class="line">  onFileChange(evt: <span class="built_in">any</span>) &#123;</span><br><span class="line">    <span class="comment">/* wire up file reader */</span></span><br><span class="line">    <span class="keyword">const</span> target: DataTransfer = &lt;DataTransfer&gt;(evt.target);</span><br><span class="line">    <span class="keyword">if</span> (target.files.length !== <span class="number">1</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Cannot use multiple files'</span>);</span><br><span class="line">    <span class="keyword">const</span> reader: FileReader = <span class="keyword">new</span> FileReader();</span><br><span class="line">    reader.onload = <span class="function">(<span class="params">e: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">/* read workbook */</span></span><br><span class="line">      <span class="keyword">const</span> bstr: <span class="built_in">string</span> = e.target.result;</span><br><span class="line">      <span class="keyword">const</span> wb: XLSX.WorkBook = XLSX.read(bstr, &#123;<span class="keyword">type</span>: <span class="string">'binary'</span>&#125;);</span><br><span class="line"></span><br><span class="line">      <span class="comment">/* grab first sheet */</span></span><br><span class="line">      <span class="keyword">const</span> wsname: <span class="built_in">string</span> = wb.SheetNames[<span class="number">0</span>];</span><br><span class="line">      <span class="keyword">const</span> ws: XLSX.WorkSheet = wb.Sheets[wsname];</span><br><span class="line"></span><br><span class="line">      <span class="comment">/* save data */</span></span><br><span class="line">      <span class="keyword">this</span>.data = &lt;AOA&gt;(XLSX.utils.sheet_to_json(ws, &#123;header: <span class="number">1</span>&#125;));</span><br><span class="line">    &#125;;</span><br><span class="line">    reader.readAsBinaryString(target.files[<span class="number">0</span>]);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>结合Ant Design使用</p>
</blockquote>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">&lt;nz-upload [nzBeforeUpload]="beforeUpload"&gt;</span></span><br><span class="line"><span class="comment">   &lt;button nz-button&gt;导入文件&lt;/button&gt;</span></span><br><span class="line"><span class="comment">&lt;/nz-upload&gt;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">reader: FileReader = <span class="keyword">new</span> FileReader();</span><br><span class="line"></span><br><span class="line"><span class="keyword">constructor</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">this</span>.reader.onloadstart=<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.reader.onload = <span class="function">(<span class="params">e: <span class="built_in">any</span></span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">const</span> bstr: <span class="built_in">string</span> = e.target.result;</span><br><span class="line">        <span class="keyword">const</span> wb: XLSX.WorkBook = XLSX.read(bstr, &#123;<span class="keyword">type</span>: <span class="string">'binary'</span>&#125;);</span><br><span class="line">        <span class="keyword">const</span> sheet = wb.Sheets[wb.SheetNames[<span class="number">0</span>]];</span><br><span class="line">        <span class="keyword">const</span> json = XLSX.utils.sheet_to_json(sheet);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.header.onloadend = <span class="function"><span class="params">()</span> =&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">beforeUpload = (file: UploadFile): <span class="function"><span class="params">boolean</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">this</span>.reader.readAsBinaryString(<span class="keyword">this</span>.file);</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>json_to_sheet/aoa_to_sheet</p>
</blockquote>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* generate worksheet */</span></span><br><span class="line">const ws: <span class="type">XLSX</span>.<span class="type">WorkSheet</span> = <span class="type">XLSX</span>.utils.json_to_sheet(data);</span><br><span class="line">const ws: <span class="type">XLSX</span>.<span class="type">WorkSheet</span> = <span class="type">XLSX</span>.utils.aoa_to_sheet(data);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* generate workbook and add the worksheet */</span></span><br><span class="line">const wb: <span class="type">XLSX</span>.<span class="type">WorkBook</span> = <span class="type">XLSX</span>.utils.book_new();</span><br><span class="line"><span class="type">XLSX</span>.utils.book_append_sheet(wb, ws, <span class="symbol">'Sheet</span>1');</span><br><span class="line"></span><br><span class="line"><span class="comment">/* save to file */</span></span><br><span class="line"><span class="type">XLSX</span>.writeFile(wb, <span class="symbol">'SheetJS</span>.xlsx');</span><br><span class="line"></span><br><span class="line">或者使用file-saver中的saveAs</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;saveAs&#125; from <span class="symbol">'file</span>-save</span><br><span class="line"></span><br><span class="line">const wbout: string = <span class="type">XLSX</span>.write(wb, &#123;bookType: <span class="symbol">'xls</span>x', bookSST: <span class="literal">true</span>, <span class="class"><span class="keyword">type</span></span>: <span class="symbol">'binar</span>y'&#125;);</span><br><span class="line"></span><br><span class="line">const s2ab = (s: any) =&gt; &#123;</span><br><span class="line">    const buf = <span class="keyword">new</span> <span class="type">ArrayBuffer</span>(s.length);</span><br><span class="line">    const view = <span class="keyword">new</span> <span class="type">Uint8Array</span>(buf);</span><br><span class="line">    <span class="keyword">for</span> (let i = <span class="number">0</span>; i !== s.length; ++i) view[i] = s.charCodeAt(i) &amp; <span class="number">0xFF</span>;</span><br><span class="line">    <span class="keyword">return</span> buf;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">saveAs(<span class="keyword">new</span> <span class="type">Blob</span>([s2ab(wbout)], &#123;<span class="class"><span class="keyword">type</span></span>: <span class="symbol">'application</span>/octet-stream'&#125;), <span class="symbol">'sheetJS</span>.xlsx');</span><br></pre></td></tr></table></figure>
<blockquote>
<p>修改某一单元的数据，合并单元格问题</p>
</blockquote>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">const <span class="string">ws:</span> any = XLSX.utils.json_to_sheet(data);</span><br><span class="line"><span class="comment">// 修改填充的数据</span></span><br><span class="line">ws[<span class="string">'A1'</span>]=&#123;<span class="string">t:</span> <span class="string">'s'</span>, <span class="string">v:</span> <span class="string">'需要填写的内容'</span>&#125;;</span><br><span class="line">ws[<span class="string">'A2'</span>]=&#123;<span class="string">t:</span> <span class="string">'s'</span>, <span class="string">v:</span> <span class="string">'需要填写的内容'</span>&#125;;</span><br><span class="line">ws[<span class="string">'A3'</span>]=&#123;<span class="string">t:</span> <span class="string">'s'</span>, <span class="string">v:</span> <span class="string">'需要填写的内容'</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 合并单元格</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">c: 代表纵向，从0开始</span></span><br><span class="line"><span class="comment">r: 代表横向，从0开始</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">ws[<span class="string">'!merges'</span>]=[</span><br><span class="line">    &#123;</span><br><span class="line"><span class="symbol">    s:</span> &#123;<span class="string">c:</span> <span class="number">0</span>, <span class="string">r:</span> <span class="number">0</span>&#125;,</span><br><span class="line"><span class="symbol">    e:</span> &#123;<span class="string">c:</span> <span class="number">10</span>, <span class="string">r:</span> <span class="number">0</span>&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line"><span class="symbol">    s:</span> &#123;<span class="string">c:</span> <span class="number">1</span>, <span class="string">r:</span> <span class="number">0</span>&#125;,</span><br><span class="line"><span class="symbol">    e:</span> &#123;<span class="string">c:</span> <span class="number">1</span>, <span class="string">r:</span> <span class="number">10</span>&#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>单元格</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:center">Key</th>
<th style="text-align:center">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">v</td>
<td style="text-align:center">原始值</td>
</tr>
<tr>
<td style="text-align:center">w</td>
<td style="text-align:center">格式化文本</td>
</tr>
<tr>
<td style="text-align:center">t</td>
<td style="text-align:center">type: b Boolean, e Error, n Number, d Date, s Text, z Stub</td>
</tr>
</tbody>
</table>
<blockquote>
<p>多种导出形式</p>
</blockquote>
<ul>
<li>Importing:</li>
</ul>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">aoa_to_sheet converts an<span class="built_in"> array </span>of arrays of JS data to a worksheet.</span><br><span class="line">json_to_sheet converts an<span class="built_in"> array </span>of JS objects to a worksheet.</span><br><span class="line">table_to_sheet converts a DOM TABLE element to a worksheet.</span><br><span class="line">sheet_add_aoa adds an<span class="built_in"> array </span>of arrays of JS data to an existing worksheet.</span><br><span class="line">sheet_add_json adds an<span class="built_in"> array </span>of JS objects to an existing worksheet.</span><br></pre></td></tr></table></figure>
<ul>
<li>Exporting:</li>
</ul>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sheet_to_json converts <span class="keyword">a</span> worksheet object <span class="built_in">to</span> <span class="keyword">an</span> array <span class="keyword">of</span> JSON objects.</span><br><span class="line">sheet_to_csv generates delimiter-separated-values output.</span><br><span class="line">sheet_to_txt generates UTF16 formatted <span class="keyword">text</span>.</span><br><span class="line">sheet_to_html generates HTML output.</span><br><span class="line">sheet_to_formulae generates <span class="keyword">a</span> list <span class="keyword">of</span> <span class="keyword">the</span> formulae (<span class="keyword">with</span> <span class="built_in">value</span> fallbacks).</span><br></pre></td></tr></table></figure>
<ul>
<li>Cell and cell address manipulation:</li>
</ul>
<figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">format_cell generates the <span class="built_in">text</span> <span class="built_in">value</span> for a <span class="built_in">cell</span> (using number formats).</span><br><span class="line">encode_row / decode_row converts between <span class="number">0</span>-indexed <span class="built_in">rows</span> <span class="built_in">and</span> <span class="number">1</span>-indexed rows.</span><br><span class="line">encode_col / decode_col converts between <span class="number">0</span>-indexed <span class="built_in">columns</span> <span class="built_in">and</span> <span class="built_in">column</span> names.</span><br><span class="line">encode_cell / decode_cell converts <span class="built_in">cell</span> addresses.</span><br><span class="line">encode_range / decode_range converts <span class="built_in">cell</span> ranges.</span><br></pre></td></tr></table></figure>
<p><em>其他详细使用，请查看<a href="https://github.com/SheetJS/js-xlsx" target="_blank" rel="noopener">SheetJS</a></em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.juphy.com/2018/06/19/SheetJS/" data-id="cjkkiiu7v0000awtuzdq4xez6" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Excel/">Excel</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-centos7安装nginx" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/16/centos7安装nginx/" class="article-date">
  <time datetime="2018-06-15T16:00:00.000Z" itemprop="datePublished">2018-06-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/16/centos7安装nginx/">centos7安装nginx</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="通过yum安装"><a href="#通过yum安装" class="headerlink" title="通过yum安装"></a>通过yum安装</h2><blockquote>
<p>直接通过 yum install nginx 肯定是不行的,因为yum没有nginx，所以首先把 nginx 的源加入 yum 中。</p>
</blockquote>
<ul>
<li><p>将nginx放到yum repro库中</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh http:<span class="regexp">//</span>nginx.org<span class="regexp">/packages/</span>centos<span class="regexp">/7/</span>noarch<span class="regexp">/RPMS/</span>nginx-release-centos-<span class="number">7</span>-<span class="number">0</span>.el7.ngx.noarch.rpm</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看nginx信息</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">yum</span> <span class="literal">info</span> nginx</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用yum安装nginx</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">install</span> nginx</span><br></pre></td></tr></table></figure>
</li>
<li><p>启动nginx</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service nginx <span class="literal">start</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>查看nginx版本</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">nginx -v</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>访问nginx，查看nginx服务返回的信息</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -<span class="selector-tag">i</span> 公网IP</span><br></pre></td></tr></table></figure>
</li>
<li><p>nginx -t：测试配置文件的语法，配置文件是否写得正确，以及配置文件得路径</p>
</li>
<li><p>找到nginx文件路径</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ps</span> aux | <span class="keyword">grep</span> nginx</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="手动下载安装包"><a href="#手动下载安装包" class="headerlink" title="手动下载安装包"></a>手动下载安装包</h2><ul>
<li><p>1、下载nginx包</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http:<span class="regexp">//</span>nginx.org<span class="regexp">/download/</span>nginx-<span class="number">1.10</span>.<span class="number">1</span>.tar.gz</span><br></pre></td></tr></table></figure>
</li>
<li><p>2、复制包到安装目录</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp nginx-<span class="number">1.10</span>.<span class="number">1</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span> /usr/loca</span><br></pre></td></tr></table></figure>
</li>
<li><p>3、解压</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">tar</span> <span class="selector-tag">-zxvf</span> <span class="selector-tag">nginx-1</span><span class="selector-class">.10</span><span class="selector-class">.1</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>4、启动nginx</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/usr/</span>local<span class="regexp">/nginx/</span>sbin<span class="regexp">/nginx</span></span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.juphy.com/2018/06/16/centos7安装nginx/" data-id="cjkkiiu810001awtu48o0suxs" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-数组方法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/04/08/数组方法/" class="article-date">
  <time datetime="2018-04-07T16:00:00.000Z" itemprop="datePublished">2018-04-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/04/08/数组方法/">数组方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="ES6数组"><a href="#ES6数组" class="headerlink" title="ES6数组"></a>ES6数组</h2><ul>
<li>Array.from()：用于将两类对象转为真正的数组，类似数组的对象（array-like object）和可遍历（iterable）的对象（包括 ES6 新增的数据结构 Set 和 Map）。<ul>
<li>所谓类似数组的对象，本质特征只有一点，即必须有length属性。因此，任何有length属性的对象，都可以通过Array.from方法转为数组，而此时扩展运算符就无法转换。</li>
<li>第二个参数，作用类似于数组的map方法，用来对每个元素进行处理，将处理后的值放入返回的数组。</li>
<li>第三个参数，用来绑定this。</li>
<li>Array.from()的另一个应用是，将字符串转为数组，然后返回字符串的长度。因为它能正确处理各种 Unicode 字符，可以避免 JavaScript 将大于\uFFFF的 Unicode 字符，算作两个字符的 bug。</li>
</ul>
</li>
<li><p>Array.of()：用于将一组值，转换为数组。弥补数组构造函数Array()的不足。因为参数个数的不同，会导致Array()的行为有差异。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">Array</span><span class="params">()</span></span> <span class="comment">// []</span></span><br><span class="line"><span class="function"><span class="title">Array</span><span class="params">(<span class="number">3</span>)</span></span> <span class="comment">// [, , ,]</span></span><br><span class="line"><span class="function"><span class="title">Array</span><span class="params">(<span class="number">3</span>, <span class="number">11</span>, <span class="number">8</span>)</span></span> <span class="comment">// [3, 11, 8]</span></span><br><span class="line">Array.of总是返回参数值组成的数组。如果没有参数，就返回一个空数组</span><br></pre></td></tr></table></figure>
</li>
<li><p>copyWithin()：在当前数组内部，将指定位置的成员复制到其他位置（会覆盖原有成员），然后返回当前数组。也就是说，使用这个方法，会修改当前数组。</p>
</li>
<li>Array.prototype.copyWithin(target, start = 0, end = this.length)<ul>
<li>target（必需）：从该位置开始替换数据。如果为负值，表示倒数。</li>
<li>start（可选）：从该位置开始读取数据，默认为 0。如果为负值，表示倒数。</li>
<li>end（可选）：到该位置前停止读取数据，默认等于数组长度。如果为负值，表示倒数。</li>
</ul>
</li>
<li>find：用于找出第一个符合条件的数组成员。它的参数是一个回调函数，所有数组成员依次执行该回调函数，直到找出第一个返回值为true的成员，然后返回该成员。如果没有符合条件的成员，则返回undefined。</li>
<li><p>findIndex：返回第一个符合条件的数组成员的位置，如果所有成员都不符合条件，则返回-1。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">这两个方法都可以接受第二个参数，用来绑定回调函数的<span class="keyword">this</span>对象。</span><br><span class="line"></span><br><span class="line">[<span class="literal">NaN</span>].indexOf(<span class="literal">NaN</span>)</span><br><span class="line"><span class="comment">// -1</span></span><br><span class="line"></span><br><span class="line">[<span class="literal">NaN</span>].findIndex(<span class="function"><span class="params">y</span> =&gt;</span> <span class="built_in">Object</span>.is(<span class="literal">NaN</span>, y))</span><br><span class="line"><span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line">indexOf方法无法识别数组的<span class="literal">NaN</span>成员，但是findIndex方法可以借助<span class="built_in">Object</span>.is方法做到。</span><br></pre></td></tr></table></figure>
</li>
<li><p>fill：使用给定值，填充一个数组。fill方法还可以接受第二个和第三个参数，用于指定填充的起始位置和结束位置。</p>
<ul>
<li>如果填充的类型为对象，那么被赋值的是同一个内存地址的对象，而不是深拷贝对象。</li>
</ul>
</li>
<li>enties()：键值对的遍历</li>
<li>keys()：键名的遍历</li>
<li>values()：键值的遍历</li>
</ul>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">如果不使用<span class="keyword">for</span>...<span class="keyword">of</span>循环，可以手动调用遍历器对象的<span class="keyword">next</span>方法，进行遍历。</span><br><span class="line"><span class="keyword">let</span> letter = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</span><br><span class="line"><span class="keyword">let</span> entries = letter.entries();</span><br><span class="line">console.log(entries.<span class="keyword">next</span>().<span class="keyword">value</span>); // [<span class="number">0</span>, <span class="string">'a'</span>]</span><br><span class="line">console.log(entries.<span class="keyword">next</span>().<span class="keyword">value</span>); // [<span class="number">1</span>, <span class="string">'b'</span>]</span><br><span class="line">console.log(entries.<span class="keyword">next</span>().<span class="keyword">value</span>); // [<span class="number">2</span>, <span class="string">'c'</span>]</span><br></pre></td></tr></table></figure>
<ul>
<li>includes：返回一个布尔值，表示某个数组是否包含给定的值，与字符串的includes方法类似。<ul>
<li>该方法的第二个参数表示搜索的起始位置，默认为0。如果第二个参数为负数，则表示倒数的位置，如果这时它大于数组长度（比如第二个参数为-4，但数组长度为3），则会重置为从0开始。</li>
<li>indexOf方法有两个缺点，一是不够语义化，它的含义是找到参数值的第一个出现位置，所以要去比较是否不等于-1，表达起来不够直观。二是，它内部使用严格相等运算符（===）进行判断，这会导致对NaN的误判。[NaN].indexOf(NaN) //-1</li>
</ul>
</li>
<li>Map 和 Set 数据结构有一个has方法，需要注意与includes区分。<ul>
<li>Map 结构的has方法，是用来查找键名的，比如Map.prototype.has(key)、WeakMap.prototype.has(key)、Reflect.has(target, propertyKey)。</li>
<li>Set 结构的has方法，是用来查找值的，比如Set.prototype.has(value)、WeakSet.prototype.has(value)。</li>
</ul>
</li>
</ul>
<h2 id="数组的空位"><a href="#数组的空位" class="headerlink" title="数组的空位"></a>数组的空位</h2><ul>
<li><p>数组的空位指，数组的某一个位置没有任何值。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">Array</span><span class="params">(<span class="number">3</span>)</span></span> <span class="comment">//[,,,]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>空位不是undefined，一个位置的值等于undefined，依然是有值的。空位是没有任何值的。</p>
</li>
</ul>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">0 </span>in [undefined, undefined, undefined] // true</span><br><span class="line"><span class="symbol">0 </span>in [, , ,] // false</span><br></pre></td></tr></table></figure>
<ul>
<li><p>ES5对空位的处理，很不一致。</p>
<ul>
<li>forEach(), filter(), reduce(), every() 和some()都会跳过空位。</li>
<li>map()会跳过空位，但会保留这个值</li>
<li>join()和toString()会将空位视为undefined，而undefined和null会被处理成空字符串。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// forEach方法</span></span><br><span class="line">[,<span class="string">'a'</span>].forEach(<span class="function">(<span class="params">x,i</span>) =&gt;</span> <span class="built_in">console</span>.log(i)); <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// filter方法</span></span><br><span class="line">[<span class="string">'a'</span>,,<span class="string">'b'</span>].filter(<span class="function"><span class="params">x</span> =&gt;</span> <span class="literal">true</span>) <span class="comment">// ['a','b']</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// every方法</span></span><br><span class="line">[,<span class="string">'a'</span>].every(<span class="function"><span class="params">x</span> =&gt;</span> x===<span class="string">'a'</span>) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// reduce方法</span></span><br><span class="line">[<span class="number">1</span>,,<span class="number">2</span>].reduce(<span class="function">(<span class="params">x,y</span>) =&gt;</span> <span class="keyword">return</span> x+y) <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// some方法</span></span><br><span class="line">[,<span class="string">'a'</span>].some(<span class="function"><span class="params">x</span> =&gt;</span> x !== <span class="string">'a'</span>) <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// map方法</span></span><br><span class="line">[,<span class="string">'a'</span>].map(<span class="function"><span class="params">x</span> =&gt;</span> <span class="number">1</span>) <span class="comment">// [,1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// join方法</span></span><br><span class="line">[,<span class="string">'a'</span>,<span class="literal">undefined</span>,<span class="literal">null</span>].join(<span class="string">'#'</span>) <span class="comment">// "#a##"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// toString方法</span></span><br><span class="line">[,<span class="string">'a'</span>,<span class="literal">undefined</span>,<span class="literal">null</span>].toString() <span class="comment">// ",a,,"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>ES6 则是明确将空位转为undefined。</p>
<ul>
<li>Array.from方法会将数组的空位，转为undefined，也就是说，这个方法不会忽略空位。</li>
<li>扩展运算符（…）也会将空位转为undefined。</li>
<li>copyWithin()会连空位一起拷贝。</li>
<li>fill()会将空位视为正常的数组位置。</li>
<li>for…of循环也会遍历空位。</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.juphy.com/2018/04/08/数组方法/" data-id="cjkkiiu8f000fawtudiqyehh7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Array/">Array</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ES6/">ES6</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-数值方法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/25/数值方法/" class="article-date">
  <time datetime="2018-03-24T16:00:00.000Z" itemprop="datePublished">2018-03-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/25/数值方法/">数值方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="二进制和八进制表示法"><a href="#二进制和八进制表示法" class="headerlink" title="二进制和八进制表示法"></a>二进制和八进制表示法</h2><blockquote>
<p>ES6 提供了二进制和八进制数值的新的写法，分别用前缀0b（或0B）和0o（或0O）表示。</p>
</blockquote>
<blockquote>
<p>如果要将0b和0o前缀的字符串数值转为十进制，要使用Number方法。</p>
</blockquote>
<ul>
<li><p>Number.isFinite()：用来检查一个数值是否为有限的（finite），即不是Infinity。如果参数类型不是数值，Number.isFinite一律返回false。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Number</span>.isFinite(<span class="number">15</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Number</span>.isFinite(<span class="number">0.8</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Number</span>.isFinite(<span class="literal">NaN</span>); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Number</span>.isFinite(<span class="literal">Infinity</span>); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Number</span>.isFinite(-<span class="literal">Infinity</span>); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Number</span>.isFinite(<span class="string">'foo'</span>); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Number</span>.isFinite(<span class="string">'15'</span>); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Number</span>.isFinite(<span class="literal">true</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Number.isNaN()：用来检查一个值是否为NaN。如果参数类型不是数值，Number.isNaN一律返回false。</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Number</span>.isNaN(<span class="literal">NaN</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Number</span>.isNaN(<span class="number">15</span>) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Number</span>.isNaN(<span class="string">'15'</span>) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Number</span>.isNaN(<span class="literal">true</span>) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Number</span>.isNaN(<span class="number">9</span>/<span class="literal">NaN</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Number</span>.isNaN(<span class="string">'true'</span> / <span class="number">0</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Number</span>.isNaN(<span class="string">'true'</span> / <span class="string">'true'</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>它们与传统的全局方法isFinite()和isNaN()的区别在于，传统方法先调用Number()将非数值的值转为数值，再进行判断，而这两个新方法只对数值有效，Number.isFinite()对于非数值一律返回false，Number.isNaN()只有对于NaN才返回true，非NaN一律返回false。</p>
</blockquote>
<ul>
<li>ES6 将全局方法parseInt()和parseFloat()，移植到Number对象上面，行为完全保持不变。</li>
<li>Number.isInteger()用来判断一个数值是否为整数，返回布尔值。JavaScript 内部，整数和浮点数采用的是同样的储存方法，所以 25 和 25.0 被视为同一个值。如果参数不是数值，Number.isInteger返回false。</li>
</ul>
<blockquote>
<p>由于 JavaScript 采用 IEEE 754 标准，数值存储为64位双精度格式，数值精度最多可以达到 53 个二进制位（1 个隐藏位与 52 个有效位）。如果数值的精度超过这个限度，第54位及后面的位就会被丢弃，这种情况下，Number.isInteger可能会误判。</p>
</blockquote>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Number</span>.isInteger(<span class="number">3.0000000000000002</span>) // <span class="literal">true</span></span><br><span class="line"><span class="built_in">Number</span>.isInteger(<span class="number">5E-324</span>) // <span class="literal">false</span></span><br><span class="line"><span class="built_in">Number</span>.isInteger(<span class="number">5E-325</span>) // <span class="literal">true</span></span><br><span class="line">类似的情况还有，如果一个数值的绝对值小于<span class="built_in">Number</span>.MIN_VALUE（<span class="number">5E-324</span>），即小于 JavaScript 能够分辨的最小值，会被自动转为 <span class="number">0</span>。这时，<span class="built_in">Number</span>.isInteger也会误判。</span><br></pre></td></tr></table></figure>
<ul>
<li>Number.EPSILON：根据规格，它表示 1 与大于 1 的最小浮点数之间的差。对于 64 位浮点数来说，大于 1 的最小浮点数相当于二进制的1.00..001，小数点后面有连续 51 个零。这个值减去 1 之后，就等于 2 的 -52 次方。<br>Number.EPSILON实际上是 JavaScript 能够表示的最小精度。误差如果小于这个值，就可以认为已经没有意义了，即不存在误差了。</li>
<li>Number.MAX_SAFE_INTEGER，Number.MIN_SAFE_INTEGER用来表示整数范围的上下限。</li>
<li>Number.isSafeInteger()：用来判断一个<code>整数</code>是否落在这个范围之内。</li>
<li>Math.trunc方法用于去除一个数的小数部分，返回整数部分。对于非数值，Math.trunc内部使用Number方法将其先转为数值。对于空值和无法截取整数的值，返回NaN。</li>
<li><p>Math.sign方法用来判断一个数到底是正数、负数、还是零。对于非数值，会先将其转换为数值。如果参数是非数值，会自动转为数值。对于那些无法转为数值的值，会返回NaN。</p>
<pre><code><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">它会返回五种值。</span><br><span class="line">参数为正数，返回+<span class="number">1</span>；</span><br><span class="line">参数为负数，返回<span class="number">-1</span>；</span><br><span class="line">参数为 <span class="number">0</span>，返回<span class="number">0</span>；</span><br><span class="line">参数为<span class="number">-0</span>，返回<span class="number">-0</span>;</span><br><span class="line">其他值，返回NaN。</span><br></pre></td></tr></table></figure>
</code></pre></li>
<li><p>**：指数运算符。</p>
<pre><code><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2</span>**<span class="number">2</span> <span class="comment">// 4</span></span><br><span class="line"><span class="number">2</span>**<span class="number">3</span> <span class="comment">// 4</span></span><br><span class="line">a**<span class="number">2</span> <span class="comment">// a*a</span></span><br><span class="line">b**<span class="number">3</span> <span class="comment">// b*b*b</span></span><br></pre></td></tr></table></figure>
</code></pre></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.juphy.com/2018/03/25/数值方法/" data-id="cjkkiiu8b000aawtu0t7v1zjt" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ES6/">ES6</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Number/">Number</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-对象方法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/18/对象方法/" class="article-date">
  <time datetime="2018-03-17T16:00:00.000Z" itemprop="datePublished">2018-03-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/18/对象方法/">对象方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="属性的简洁表示法"><a href="#属性的简洁表示法" class="headerlink" title="属性的简洁表示法"></a>属性的简洁表示法</h2><p><em>ES6允许直接写入变量和函数，最为对象的属性和方法。</em></p>
<ul>
<li>name：返回函数名 。</li>
<li>Object.is()：用来比较两个值是否严格相等，与严格比较运算符（===）的行为基本一致。不同之处只有两个：一是+0不等于-0，二是NaN等于自身。</li>
<li>Object.assign()：用于对象的合并，将原对象的所有可枚举属性，赋值到目标对象。第一个参数是目标对象，后面的参数都是源对象。如果目标对象与源对象有同名属性，或多个源对象有同名属性，则后面的属性会覆盖前面的属性。<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var <span class="keyword">target</span>=&#123;a:<span class="number">1</span>&#125;<span class="comment">;</span></span><br><span class="line"><span class="comment">var target1=&#123;b:2&#125;;</span></span><br><span class="line"><span class="comment">var target2=&#123;c:3&#125;;</span></span><br><span class="line"><span class="comment">Object.assign(target,target1,target2)</span></span><br><span class="line"><span class="comment">target // &#123;a:1,b:2,c:3&#125;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>如果该参数不是对象，则会先转成对象，然后返回。由于undefined和null无法转成对象，所以如果它们作为参数，就会报错。</p>
<p>如果非对象参数出现在源对象的位置（即非首参数），那么处理规则有所不同。首先，这些参数都会转成对象，如果无法转成对象，就会跳过。这意味着，如果undefined和null不在首参数，就不会报错。</p>
<p>其他类型的值（即数值、字符串和布尔值）不在首参数，也不会报错。但是，除了字符串会以数组形式，拷贝入目标对象，其他值都不会产生效果。</p>
<ul>
<li><p>Object.assign拷贝的属性是有限制的，只拷贝源对象的自身属性（不拷贝自身属性），也不拷贝不可枚举的属性（enumerable:false）。</p>
<ul>
<li>1、实行的是浅拷贝，而不是深拷贝。也就是说，如果源对象某个属性的值是对象，那么目标对象拷贝得到的是这个对象的引用。</li>
<li>2、同名属性替换</li>
<li><p>3、数组的处理：但是会把数组视为对象。</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Object.assign([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>])</span><br><span class="line"><span class="comment">// [4, 5, 3]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>4、取值函数的处理：Object.assign只能进行值的复制，如果要复制的值是一个取值函数，那么将求值后再复制。</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> source = &#123;</span><br><span class="line">  <span class="function">get <span class="title">foo</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="number">1</span> &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">target</span> = &#123;&#125;;</span><br><span class="line">Object.assign(<span class="keyword">target</span>, source)</span><br><span class="line"><span class="comment">// &#123; foo: 1 &#125;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h2 id="可枚举性"><a href="#可枚举性" class="headerlink" title="可枚举性"></a>可枚举性</h2><p>描述对象的enumerable属性，称为“可枚举性”，如果该属性为false，就表示某些操作会忽略当前属性。</p>
<p>目前，有四个操作会忽略enumerable为false的属性。</p>
<ul>
<li>for…in循环：只遍历对象自身的和继承的可枚举的属性。</li>
<li>Object.keys()：返回对象自身的所有可枚举的属性的键名。</li>
<li>JSON.stringify()：只串行化对象自身的可枚举的属性。</li>
<li>Object.assign()： 忽略enumerable为false的属性，只拷贝对象自身的可枚举的属性。</li>
</ul>
<h2 id="属性的遍历"><a href="#属性的遍历" class="headerlink" title="属性的遍历"></a>属性的遍历</h2><ul>
<li>ES6 一共有 5 种方法可以遍历对象的属性。<ul>
<li>（1）for…in：for…in循环遍历对象自身的和继承的可枚举属性（不含 Symbol 属性）。</li>
<li>（2）Object.keys(obj)：Object.keys返回一个数组，包括对象自身的（不含继承的）所有可枚举属性（不含 Symbol 属性）的键名。<br>-（3）Object.getOwnPropertyNames(obj)：Object.getOwnPropertyNames返回一个数组，包含对象自身的所有属性（不含 Symbol 属性，但是包括不可枚举属性）的键名。<br>-（4）Object.getOwnPropertySymbols(obj)：Object.getOwnPropertySymbols返回一个数组，包含对象自身的所有 Symbol 属性的键名。<br>-（5）Reflect.ownKeys(obj)：Reflect.ownKeys返回一个数组，包含对象自身的所有键名，不管键名是 Symbol 或字符串，也不管是否可枚举。</li>
</ul>
</li>
</ul>
<blockquote>
<p>以上的 5 种方法遍历对象的键名，都遵守同样的属性遍历的次序规则。</p>
</blockquote>
<blockquote>
<p>首先遍历所有数值键，按照数值升序排列。</p>
</blockquote>
<blockquote>
<p>其次遍历所有字符串键，按照加入时间升序排列。</p>
</blockquote>
<blockquote>
<p>最后遍历所有 Symbol 键，按照加入时间升序排列。</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.juphy.com/2018/03/18/对象方法/" data-id="cjkkiiu880006awtuek83277k" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ES6/">ES6</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Object/">Object</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-字符串方法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/11/字符串方法/" class="article-date">
  <time datetime="2018-03-10T16:00:00.000Z" itemprop="datePublished">2018-03-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/11/字符串方法/">字符串方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="ES6字符串方法"><a href="#ES6字符串方法" class="headerlink" title="ES6字符串方法"></a>ES6字符串方法</h2><ul>
<li>includes： 返回布尔值，表示是否找到了参数字符串</li>
<li>startsWith：返回布尔值，表示参数字符串是否在原字符串的头部</li>
<li>endsWisth：返回布尔值，表示参数字符串是否在原字符串的尾部</li>
</ul>
<blockquote>
<p>以上三个方法都支持第二个参数，表示开始搜索的位置，使用第二个参数时，endsWith表示的是针对前n个字符，而其他两个方法针对从第n个位置直到字符串结束。</p>
</blockquote>
<ul>
<li>repeat：返回一个新字符串，表示将原字符串重复n次。string.repeat(n)<ul>
<li>n=0，返回空字符串</li>
<li>n是小数，会被向下取整</li>
<li>n是0到-1之间的小数，则等同于0</li>
<li>n是负数或者Infinity，则会报错</li>
<li>NaN等同于0</li>
<li>n是字符串，则会转换成数字</li>
</ul>
</li>
</ul>
<ul>
<li>padStart：返回补全后的字符串，在原字符串前补全</li>
<li>padEnd：返回补全后的字符串，在原字符串后补全<ul>
<li>如果某个字符串不够指定长度，会在头部或尾部补全，接受两个参数，第一个参数用来指定字符串的最小长度，第二个参数是用来补全的字符串</li>
<li>如果原字符串的长度，等于或大于指定的最小长度，则返回原字符串。</li>
<li>如果用来补全的字符串与原字符串，两者的长度之和超过了指定的最小长度，则会截去超出位数的补全字符串。</li>
<li>如果省略第二个参数，默认使用空格补全长度。</li>
<li>常见用途：数值补全指定位数，提示字符串格式</li>
</ul>
</li>
</ul>
<ul>
<li>ES6 为字符串添加了遍历器接口，使得字符串可以被for…of循环遍历。除了遍历字符串，这个遍历器最大的优点是可以识别大于0xFFFF的码点，传统的for循环无法识别这样的码点。</li>
<li>模板字符串：是增强版的字符串，用反引号（`）标识。它可以当作普通字符串使用，也可以用来定义多行字符串，或者在字符串中嵌入变量。<ul>
<li>如果在模板字符串中需要使用反引号，则前面要用反斜杠转义。</li>
<li>如果使用模板字符串表示多行字符串，所有的空格和缩进都会被保留在输出之中。如果不想要换行，可以使用trim()</li>
<li>模板字符串中嵌入变量，需要将变量名写在${}之中，大括号内部可以放入任意JavaScript表达式，可以进行运算，以及引用对象属性。</li>
<li>模板字符串之中还能调用函数。</li>
<li>如果模板字符串中的变量没有声明，将报错。</li>
</ul>
</li>
<li>标签模板：<ul>
<li>模板字符串可以紧跟在一个函数名后面，该函数将被调用来处理这个模板字符串。这被称为“标签模板”功能（tagged template）。</li>
<li>标签模板其实不是模板，而是函数调用的一种特殊形式。“标签”指的就是函数，紧跟在后面的模板字符串就是它的参数。</li>
<li>但是，如果模板字符里面有变量，就不是简单的调用了，而是会将模板字符串先处理成多个参数，再调用函数。</li>
</ul>
</li>
</ul>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">alert`<span class="number">123</span>` 相等于 alert(<span class="number">123</span>)</span><br><span class="line"></span><br><span class="line">let a = <span class="number">5</span>;</span><br><span class="line">let b = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">tag`Hello $&#123; a + b &#125; world $&#123; a * b &#125;`;</span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line">tag([<span class="string">'Hello '</span>, <span class="string">' world '</span>, <span class="string">''</span>], <span class="number">15</span>, <span class="number">50</span>);</span><br><span class="line"></span><br><span class="line">模板字符串前面有一个标识名tag，它是一个函数。整个表达式的返回值，就是tag函数处理模板字符串后的返回值。</span><br><span class="line">函数tag依次会接收到多个参数。</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tag</span><span class="params">(stringArr, value1, value2)</span></span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tag</span><span class="params">(stringArr, <span class="rest_arg">...values</span>)</span></span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>模板字符串前面有一个标识名tag，它是一个函数。整个表达式的返回值，就是tag函数处理模板字符串后的返回值。函数tag依次会接收到多个参数。</p>
<p>tag函数的第一个参数是一个数组，该数组的成员是模板字符串中那些没有变量替换的部分，也就是说，变量替换只发生在数组的第一个成员与第二个成员之间、第二个成员与第三个成员之间，以此类推。</p>
<p>tag函数的其他参数，都是模板字符串各个变量被替换后的值。由于本例中，模板字符串含有两个变量，因此tag会接受到value1和value2两个参数。</p>
<p>tag函数所有参数的实际值如下。</p>
<ul>
<li>第一个参数：[‘Hello ‘, ‘ world ‘, ‘’]</li>
<li>第二个参数: 15</li>
<li>第三个参数：50</li>
</ul>
<p>如何将各个参数按照原来的位置拼合回去？</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> total = <span class="number">30</span>;</span><br><span class="line"><span class="keyword">let</span> msg = passthru<span class="string">`The total is <span class="subst">$&#123;total&#125;</span> (<span class="subst">$&#123;total*<span class="number">1.05</span>&#125;</span> with tax)`</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">passthru</span>(<span class="params">literals</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result = <span class="string">''</span>;</span><br><span class="line">  <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (i &lt; literals.length) &#123;</span><br><span class="line">    result += literals[i++];</span><br><span class="line">    <span class="keyword">if</span> (i &lt; <span class="built_in">arguments</span>.length) &#123;</span><br><span class="line">      result += <span class="built_in">arguments</span>[i];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">literals <span class="comment">// [ 'The total is ', ' (', ' with tax)' ]</span></span><br><span class="line"><span class="built_in">arguments</span> <span class="comment">// &#123; '0': [ 'The total is ', ' (', ' with tax)' ],</span></span><br><span class="line">               <span class="string">'1'</span>: <span class="number">30</span>,</span><br><span class="line">               <span class="string">'2'</span>: <span class="number">31.5</span> &#125;</span><br><span class="line">msg <span class="comment">// "The total is 30 (31.5 with tax)"</span></span><br></pre></td></tr></table></figure>
<p>passthru函数采用rest函数：</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">passthru</span><span class="params">(literals, <span class="rest_arg">...values</span>)</span></span>&#123;</span><br><span class="line">    let output = <span class="string">""</span>;</span><br><span class="line">    let index;</span><br><span class="line">    <span class="keyword">for</span>(index = <span class="number">0</span>; index &lt; values.length; index++)&#123;</span><br><span class="line">        output += literals[index] + values[index];</span><br><span class="line">    &#125;</span><br><span class="line">    output += literals[index];</span><br><span class="line">    <span class="keyword">return</span> output;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>“标签模板”的作用：</p>
<ul>
<li>过滤 HTML 字符串，防止用户输入恶意内容。</li>
<li>多语言转换（国际化处理）。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> message =</span><br><span class="line">  SaferHTML<span class="string">`&lt;p&gt;<span class="subst">$&#123;sender&#125;</span> has sent you a message.&lt;/p&gt;`</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SaferHTML</span>(<span class="params">templateData</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> s = templateData[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; <span class="built_in">arguments</span>.length; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> arg = <span class="built_in">String</span>(<span class="built_in">arguments</span>[i]);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Escape special characters in the substitution.</span></span><br><span class="line">    s += arg.replace(<span class="regexp">/&amp;/g</span>, <span class="string">"&amp;amp;"</span>)</span><br><span class="line">            .replace(<span class="regexp">/&lt;/g</span>, <span class="string">"&amp;lt;"</span>)</span><br><span class="line">            .replace(<span class="regexp">/&gt;/g</span>, <span class="string">"&amp;gt;"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Don't escape special characters in the template.</span></span><br><span class="line">    s += templateData[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">let sender = '<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="actionscript">alert(<span class="string">"abc"</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>'; // 恶意代码</span></span><br><span class="line"><span class="xml">let message = SaferHTML`<span class="tag">&lt;<span class="name">p</span>&gt;</span>$</span><span class="template-variable">&#123;sender&#125;</span><span class="xml"> has sent you a message.<span class="tag">&lt;/<span class="name">p</span>&gt;</span>`;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">message</span></span><br></pre></td></tr></table></figure>
<ul>
<li>String.raw()：String.raw方法，往往用来充当模板字符串的处理函数，返回一个斜杠都被转义（即斜杠前面再加一个斜杠）的字符串，对应于替换变量后的模板字符串。<ul>
<li>作为处理模板字符串的基本方法，它会将所有变量替换，而且对斜杠进行转义，方便下一步作为字符串来使用。</li>
<li>作为正常的函数使用。这时，它的第一个参数，应该是一个具有raw属性的对象，且raw属性的值应该是一个数组。</li>
</ul>
</li>
</ul>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">String.raw(&#123; raw: <span class="string">'test'</span> &#125;, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"><span class="comment">// 't0e1s2t'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line">String.raw(&#123; raw: [<span class="string">'t'</span>,<span class="string">'e'</span>,<span class="string">'s'</span>,<span class="string">'t'</span>] &#125;, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">String.raw = <span class="function"><span class="keyword">function</span> <span class="params">(strings, <span class="rest_arg">...values</span>)</span> </span>&#123;</span><br><span class="line">  let output = <span class="string">''</span>;</span><br><span class="line">  let index;</span><br><span class="line">  <span class="keyword">for</span> (index = <span class="number">0</span>; index &lt; values.length; index++) &#123;</span><br><span class="line">    output += strings.raw[index] + values[index];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  output += strings.raw[index]</span><br><span class="line">  <span class="keyword">return</span> output;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.juphy.com/2018/03/11/字符串方法/" data-id="cjkkiiu860005awturu84f6v3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ES6/">ES6</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/String/">String</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-函数方法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/04/函数方法/" class="article-date">
  <time datetime="2018-03-03T16:00:00.000Z" itemprop="datePublished">2018-03-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/04/函数方法/">函数方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="参数默认值"><a href="#参数默认值" class="headerlink" title="参数默认值"></a>参数默认值</h2><figure class="highlight scilab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ES6 允许为函数的参数设置默认值，即直接写在参数定义的后面。</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">log</span><span class="params">(x, y = 'World')</span> &#123;</span></span><br><span class="line">  console.<span class="built_in">log</span>(x, y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">log</span>(<span class="string">'Hello'</span>) <span class="comment">// Hello World</span></span><br><span class="line"><span class="built_in">log</span>(<span class="string">'Hello'</span>, <span class="string">'China'</span>) <span class="comment">// Hello China</span></span><br><span class="line"><span class="built_in">log</span>(<span class="string">'Hello'</span>, <span class="string">''</span>) <span class="comment">// Hello</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>参数变量x是默认声明的，在函数体中，不能用let或const再次声明，否则会报错。</p>
</blockquote>
<blockquote>
<p>使用参数默认值时，函数不能有同名参数。</p>
</blockquote>
<blockquote>
<p>参数默认值不是传值的，而是每次都重新计算默认值表达式的值。也就是说，参数默认值是惰性求值的。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">99</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">p = x + <span class="number">1</span></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo() <span class="comment">// 100</span></span><br><span class="line"></span><br><span class="line">x = <span class="number">100</span>;</span><br><span class="line">foo() <span class="comment">// 101</span></span><br></pre></td></tr></table></figure>
<h2 id="与解构赋值默认值结合使用"><a href="#与解构赋值默认值结合使用" class="headerlink" title="与解构赋值默认值结合使用"></a>与解构赋值默认值结合使用</h2><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(&#123;x, y = 5&#125;)</span> <span class="comment">&#123;</span></span></span><br><span class="line"><span class="function"><span class="comment">  console.log(x, y);</span></span></span><br><span class="line"><span class="function"><span class="comment">&#125;</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">foo</span><span class="params">(&#123;&#125;)</span> // <span class="title">undefined</span> 5</span></span><br><span class="line"><span class="function"><span class="title">foo</span><span class="params">(&#123;x: 1&#125;)</span> // 1 5</span></span><br><span class="line"><span class="function"><span class="title">foo</span><span class="params">(&#123;x: 1, y: 2&#125;)</span> // 1 2</span></span><br><span class="line"><span class="function"><span class="title">foo</span><span class="params">()</span> // <span class="title">TypeError</span>:</span> Cannot <span class="keyword">read</span> <span class="keyword">property</span> <span class="string">'x'</span> <span class="keyword">of</span> undefined</span><br></pre></td></tr></table></figure>
<blockquote>
<p>只有当函数foo的参数是一个对象时，变量x和y才会通过解构赋值生成。如果函数foo调用时没提供参数，变量x和y就不会生成，从而报错。通过提供函数参数的默认值，就可以避免这种情况。</p>
</blockquote>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 写法一</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">m1</span><span class="params">(&#123;x = 0, y = 0&#125; = &#123;&#125;)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [x, y];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 写法二</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">m2</span><span class="params">(&#123;x, y&#125; = &#123; x: 0, y: 0 &#125;)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [x, y];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>区别是写法一函数参数的默认值是空对象，但是设置了对象解构赋值的默认值；写法二函数参数的默认值是一个有具体属性的对象，但是没有设置对象解构赋值的默认值。</p>
</blockquote>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数没有参数的情况</span></span><br><span class="line"><span class="function"><span class="title">m1</span><span class="params">()</span></span> <span class="comment">// [0, 0]</span></span><br><span class="line"><span class="function"><span class="title">m2</span><span class="params">()</span></span> <span class="comment">// [0, 0]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// x 和 y 都有值的情况</span></span><br><span class="line"><span class="function"><span class="title">m1</span><span class="params">(&#123;x: <span class="number">3</span>, y: <span class="number">8</span>&#125;)</span></span> <span class="comment">// [3, 8]</span></span><br><span class="line"><span class="function"><span class="title">m2</span><span class="params">(&#123;x: <span class="number">3</span>, y: <span class="number">8</span>&#125;)</span></span> <span class="comment">// [3, 8]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// x 有值，y 无值的情况</span></span><br><span class="line"><span class="function"><span class="title">m1</span><span class="params">(&#123;x: <span class="number">3</span>&#125;)</span></span> <span class="comment">// [3, 0]</span></span><br><span class="line"><span class="function"><span class="title">m2</span><span class="params">(&#123;x: <span class="number">3</span>&#125;)</span></span> <span class="comment">// [3, undefined]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// x 和 y 都无值的情况</span></span><br><span class="line"><span class="function"><span class="title">m1</span><span class="params">(&#123;&#125;)</span></span> <span class="comment">// [0, 0];</span></span><br><span class="line"><span class="function"><span class="title">m2</span><span class="params">(&#123;&#125;)</span></span> <span class="comment">// [undefined, undefined]</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">m1</span><span class="params">(&#123;z: <span class="number">3</span>&#125;)</span></span> <span class="comment">// [0, 0]</span></span><br><span class="line"><span class="function"><span class="title">m2</span><span class="params">(&#123;z: <span class="number">3</span>&#125;)</span></span> <span class="comment">// [undefined, undefined]</span></span><br></pre></td></tr></table></figure>
<h2 id="参数默认值的位置"><a href="#参数默认值的位置" class="headerlink" title="参数默认值的位置"></a>参数默认值的位置</h2><blockquote>
<p>通常情况下，定义了默认值的参数，应该是函数的尾参数。因为这样比较容易看出来，到底省略了哪些参数。如果非尾部的参数设置默认值，实际上这个参数是没法省略的。</p>
</blockquote>
<blockquote>
<p>如果传入undefined，将触发该参数等于默认值，null则没有这个效果。</p>
</blockquote>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 例一</span></span><br><span class="line"><span class="selector-tag">function</span> <span class="selector-tag">f</span>(x = <span class="number">1</span>, y) &#123;</span><br><span class="line">  <span class="selector-tag">return</span> <span class="selector-attr">[x, y]</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">f</span>() <span class="comment">// [1, undefined]</span></span><br><span class="line"><span class="selector-tag">f</span>(<span class="number">2</span>) <span class="comment">// [2, undefined])</span></span><br><span class="line"><span class="selector-tag">f</span>(, <span class="number">1</span>) <span class="comment">// 报错</span></span><br><span class="line"><span class="selector-tag">f</span>(undefined, <span class="number">1</span>) <span class="comment">// [1, 1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 例二</span></span><br><span class="line"><span class="selector-tag">function</span> <span class="selector-tag">f</span>(x, y = <span class="number">5</span>, z) &#123;</span><br><span class="line">  <span class="selector-tag">return</span> <span class="selector-attr">[x, y, z]</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">f</span>() <span class="comment">// [undefined, 5, undefined]</span></span><br><span class="line"><span class="selector-tag">f</span>(<span class="number">1</span>) <span class="comment">// [1, 5, undefined]</span></span><br><span class="line"><span class="selector-tag">f</span>(<span class="number">1</span>, ,<span class="number">2</span>) <span class="comment">// 报错</span></span><br><span class="line"><span class="selector-tag">f</span>(<span class="number">1</span>, undefined, <span class="number">2</span>) <span class="comment">// [1, 5, 2]</span></span><br></pre></td></tr></table></figure>
<h2 id="函数的length属性"><a href="#函数的length属性" class="headerlink" title="函数的length属性"></a>函数的length属性</h2><blockquote>
<p>指定了默认值以后，函数的length属性，将返回没有指定默认值的参数个数。也就是说，指定了默认值后，length属性将失真。</p>
</blockquote>
<blockquote>
<p>如果设置了默认值的参数不是尾参数，那么length属性也不再计入后面的参数了。</p>
</blockquote>
<h2 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h2><blockquote>
<p>一旦设置了参数的默认值，函数进行声明初始化时，参数会形成一个单独的作用域（context）。等到初始化结束，这个作用域就会消失。这种语法行为，在不设置参数默认值时，是不会出现的。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x, y = x</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f(<span class="number">2</span>) <span class="comment">// 2</span></span><br><span class="line">参数y的默认值等于变量x，默认值变量指向第一个参数x，而不是全局变量。</span><br></pre></td></tr></table></figure>
<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">let <span class="keyword">x</span> = <span class="number">1</span><span class="comment">;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">function f(y = x) &#123;</span></span><br><span class="line"><span class="comment">  let x = 2;</span></span><br><span class="line"><span class="comment">  console.log(y);</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">f() // 1</span></span><br><span class="line"><span class="comment">函数f调用时，参数y = x形成一个单独的作用域。这个作用域里面，变量x本身没有定义，所以指向外层的全局变量x。函数调用时，函数体内部的局部变量x影响不到默认值变量x。</span></span><br></pre></td></tr></table></figure>
<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var <span class="keyword">x</span> = <span class="number">1</span><span class="comment">;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">function foo(x = x) &#123;</span></span><br><span class="line"><span class="comment">  // ...</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">foo() // ReferenceError: x is not defined</span></span><br><span class="line"><span class="comment">参数x = x形成一个单独作用域。实际执行的是let x = x，由于暂时性死区的原因，这行代码会报错”x 未定义“。</span></span><br></pre></td></tr></table></figure>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">let foo = <span class="string">'outer'</span><span class="comment">;</span></span><br><span class="line"></span><br><span class="line">function bar(<span class="function"><span class="keyword">func</span> = <span class="params">()</span> =&gt; <span class="title">foo</span>) &#123;</span></span><br><span class="line">  let foo = <span class="string">'inner'</span><span class="comment">;</span></span><br><span class="line">  console.<span class="built_in">log</span>(<span class="function"><span class="keyword">func</span><span class="params">()</span>);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bar()<span class="comment">; // outer</span></span><br></pre></td></tr></table></figure>
<h2 id="rest参数"><a href="#rest参数" class="headerlink" title="rest参数"></a>rest参数</h2><blockquote>
<p>ES6 引入 rest 参数（形式为…变量名），用于获取函数的多余参数，这样就不需要使用arguments对象了。rest 参数搭配的变量是一个数组，该变量将多余的参数放入数组中。<br>rest 参数之后不能再有其他参数（即只能是最后一个参数），否则会报错。</p>
</blockquote>
<h2 id="尾调用"><a href="#尾调用" class="headerlink" title="尾调用"></a>尾调用</h2><blockquote>
<p>尾调用：某个函数的最后一步是调用另一个函数。</p>
</blockquote>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title">f</span>(x)&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="type">g(x)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">以下不属于尾调用：</span><br><span class="line"><span class="keyword">function</span> <span class="title">f</span>(x)&#123;</span><br><span class="line">  let y = g(x);</span><br><span class="line">  <span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title">f</span>(x)&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="type">g(x)</span> + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title">f</span>(x)&#123;</span><br><span class="line">  g(x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="尾调用优化"><a href="#尾调用优化" class="headerlink" title="尾调用优化"></a>尾调用优化</h2><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">尾调用之所以与其他调用不同，就在于它的特殊的调用位置。</span><br><span class="line">函数调用会在内存形成一个“调用记录”，又称“调用帧”（call frame），保存调用位置和内部变量等信息。如果在函数<span class="keyword">A</span>的内部调用函数B，那么在<span class="keyword">A</span>的调用帧上方，还会形成一个B的调用帧。等到B运行结束，将结果返回到<span class="keyword">A</span>，B的调用帧才会消失。如果函数B内部还调用函数C，那就还有一个C的调用帧，以此类推。所有的调用帧，就形成一个“调用栈”（call stack）。</span><br></pre></td></tr></table></figure>
<h2 id="尾递归"><a href="#尾递归" class="headerlink" title="尾递归"></a>尾递归</h2><blockquote>
<p>函数调用自身，称为递归。如果尾调用自身，就称为尾递归。</p>
</blockquote>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ES6 的尾调用优化只在严格模式下开启，正常模式是无效的。</span><br><span class="line">这是因为在正常模式下，函数内部有两个变量，可以跟踪函数的调用栈。</span><br><span class="line">	- <span class="function"><span class="keyword">func</span>.<span class="title">arguments</span>：返回调用时函数的参数。</span></span><br><span class="line">	- <span class="function"><span class="keyword">func</span>.<span class="title">caller</span>：返回调用当前函数的那个函数。</span></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.juphy.com/2018/03/04/函数方法/" data-id="cjkkiiu850004awtuife01e4i" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ES6/">ES6</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Function/">Function</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-数组基础" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/11/数组基础/" class="article-date">
  <time datetime="2017-02-10T16:00:00.000Z" itemprop="datePublished">2017-02-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/11/数组基础/">数组基础</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>除了 Object 之外， Array 类型恐怕是 ECMAScript 中最常用的类型了。而且，ECMAScript 中的数组与其他多数语言中的数组有着相当大的区别。虽然 ECMAScript 数组与其他语言中的数组都是数据的有序列表，但与其他语言不同的是，ECMAScript 数组的每一项可以保存任何类型的数据。也就是说，可以用数组的第一个位置来保存字符串，用第二位置来保存数值，用第三个位置来保存对象，以此类推。而且，ECMAScript 数组的大小是可以动态调整的，即可以随着数据的添加自动增长以容纳新增数据。</p>
</blockquote>
<h2 id="数组的定义"><a href="#数组的定义" class="headerlink" title="数组的定义"></a>数组的定义</h2><ul>
<li><p>构造函数模式</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> colors = <span class="keyword">new</span> <span class="type">Array</span>(<span class="string">"red"</span>, <span class="string">"blue"</span>, <span class="string">"green"</span>); <span class="comment">//创建一个包含 3 项，即字符串red", "blue", "green"的数组</span></span><br><span class="line"><span class="keyword">var</span> colors = <span class="keyword">new</span> <span class="type">Array</span>(<span class="number">3</span>); <span class="comment">// 创建一个包含 3 项的数组，实际项目中，很少有人这么写；</span></span><br><span class="line"><span class="keyword">var</span> colors = <span class="keyword">Array</span>(<span class="string">"red"</span>, <span class="string">"blue"</span>, <span class="string">"green"</span>); <span class="comment">//构造函数的new是可以省略的；</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>数组字面量表示法<br>数组字面量由一对包含数组项的方括号表示，多个数组项之间以逗号隔开</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> colors = [<span class="string">"red"</span>, <span class="string">"blue"</span>, <span class="string">"green"</span>]; <span class="comment">// 创建一个包含 3 个字符串的数组</span></span><br><span class="line"><span class="keyword">var</span> names = []; <span class="comment">// 创建一个空数组</span></span><br><span class="line"><span class="keyword">var</span> values = [<span class="number">1</span>,<span class="number">2</span>,]; <span class="comment">// 不要这样！这样会创建一个包含 2 或 3 项的数组</span></span><br><span class="line"><span class="keyword">var</span> options = [,,,,,]; <span class="comment">// 不要这样！这样会创建一个包含 5 或 6 项的数组</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>在 IE 中， values 会成为一个包含 3 个项且每项的值分别为 1、2 和 undefined 的数组；在其他浏览器中， values 会成为一个包含 2项且值分别为1 和 2 的数组。原因是 IE8 及之前版本中的 ECMAScript 实现在数组字面量方面存在 bug。由于这个bug导致的另一种情况如最后一行代码所示，该行代码可能会创建包含 5 项的数组（在 IE9+、Firefox、Opera、Safari 和 Chrome 中），也可能会创建包含 6 项的数组（在 IE8 及更早版本中）。在像这种省略值的情况下，每一项都将获得 undefined 值；这个结果与调用 Array 构造函数时传递项数在逻辑上是相同的。但是由于 IE 的实现与其他浏览器不一致，因此强烈建议不要使用这种语法。</p>
</blockquote>
<p>在读取和设置数组的值时，要使用方括号并提供相应值的基于 0 的数字索引，如下所示：<strong>数组的索引是以0开始的,一定要注意</strong>。<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var colors = [<span class="string">"red"</span>, <span class="string">"blue"</span>, <span class="string">"green"</span>]; <span class="comment">// 定义一个字符串数组</span></span><br><span class="line">console.log(colors[<span class="number">0</span>]); <span class="comment">// 显示第一项,可以思考下，如果访问的索引超过数组长度呢？会返回什么</span></span><br><span class="line">colors[<span class="number">2</span>] = <span class="string">"black"</span>; <span class="comment">// 修改第三项</span></span><br><span class="line">colors[<span class="number">3</span>] = <span class="string">"brown"</span>; <span class="comment">// 新增第四项,如果设置某个值的索引超过了数组现有项数,数组就会自动增加到该索引值加 1 的长度（就这个例子而言，索是 3，因此数组长度就是 4）</span></span><br></pre></td></tr></table></figure></p>
<h2 id="数组的length属性"><a href="#数组的length属性" class="headerlink" title="数组的length属性"></a>数组的length属性</h2><p>数组的项数保存在其 length 属性中，这个属性始终会返回 0 或更大的值，如下面这个例子所示：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> colors = [<span class="string">"red"</span>, <span class="string">"blue"</span>, <span class="string">"green"</span>]; <span class="comment">// 创建一个包含 3 个字符串的数组</span></span><br><span class="line"><span class="keyword">var</span> names = []; <span class="comment">// 创建一个空数组</span></span><br><span class="line"><span class="built_in">console</span>.log(colors.length); <span class="comment">//3</span></span><br><span class="line"><span class="built_in">console</span>.log(names.length); <span class="comment">//0</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>数组的 length 属性很有特点——它不是只读的。因此，通过设置这个属性，可以从数组的末尾移除项或向数组中添加新项。</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var colors = [<span class="string">"red"</span>, <span class="string">"blue"</span>, <span class="string">"green"</span>];  <span class="comment">// 创建一个包含 3 个字符串的数组</span></span><br><span class="line">colors.length = <span class="number">2</span>;</span><br><span class="line">console.log(colors[<span class="number">2</span>]); <span class="comment">//undefined，此时的colors数组已经被改变了；数组 colors 一开始有 3 个值。将其 length 属性设置为 2 会移除最后一项（位置为2 的那一项），结果再访问 colors[2] 就会显示 undefined 了。</span></span><br><span class="line">colors.length = <span class="number">10</span>;</span><br><span class="line">console.log(colors[<span class="number">9</span>]); <span class="comment">//undefined,虽然 colors 数组包含 2 个项，但把它的 length 属性设置成了 10。这个数组不存在位置 9，所以访问这个位置的值就得到了特殊值 undefined 。</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>利用 length 属性也可以方便地在数组末尾添加新项</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var colors = [<span class="string">"red"</span>, <span class="string">"blue"</span>, <span class="string">"green"</span>];<span class="comment"> // 创建一个包含 3 个字符串的数组</span></span><br><span class="line">colors[colors.<span class="built_in">length</span>] = <span class="string">"black"</span>;<span class="comment"> // （在位置 3 ）添加一种颜色</span></span><br><span class="line">colors[colors.<span class="built_in">length</span>] = <span class="string">"brown"</span>;<span class="comment"> // （在位置 4 )再添加一种颜色</span></span><br><span class="line">```	</span><br><span class="line">&gt; 由于数组最后一项的索引始终是 <span class="built_in">length</span><span class="number">-1</span> ，因此下一个新项的位置就是 <span class="built_in">length</span> 。每当在数组末尾添加一项后，其 <span class="built_in">length</span> 属性都会自动更新以反应这一变化。</span><br><span class="line"></span><br><span class="line">**数组中的小技巧**</span><br><span class="line"></span><br><span class="line">获取或者修改数组的长度，例如：ary.<span class="built_in">length</span> = ary.<span class="built_in">length</span><span class="number">-1</span>就是删除数组的最后一项；数组中的splice相对来说实现删除的时候，每删除一项后面的索引都需要重新的计算，比较耗费性能，如果要删除数组中所谓为n这一项，我们可以这样去写： </span><br><span class="line">```      </span><br><span class="line">ary[n]=ary[ary.<span class="built_in">length</span><span class="number">-1</span>]<span class="comment">;//首先把数组的最后一项替换当前的项</span></span><br><span class="line">ary.<span class="built_in">length</span>=ary.<span class="built_in">length</span><span class="number">-1</span><span class="comment">;//然后在删除数组的最后一项</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="数组的使用"><a href="#数组的使用" class="headerlink" title="数组的使用"></a>数组的使用</h2><ul>
<li>array[index] ;直接数组后面跟[索引]即可；</li>
</ul>
<h2 id="数组的方法"><a href="#数组的方法" class="headerlink" title="数组的方法"></a>数组的方法</h2><ul>
<li><code>push</code> 向数组末尾增加新元素，返回新增后数组的长度，原有的数组改变；<figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var ary=[];</span><br><span class="line">ary.push(<span class="number">12</span>);</span><br><span class="line">```  </span><br><span class="line">- `pop` 删除数组末尾的元素，返回删除的内容，原有的数组改变；</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>var ary=[1，2，3，4];<br>ary.pop();<br><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- `shift` 删除数组第一位元素，返回删除后的内容，原有的数组改变；</span><br></pre></td></tr></table></figure></p>
<p>var ary=[1，2，3，4];<br>ary.shift();<br><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- `unshift` 向数组开头增加新元素，返回新增后数组的长度，原有的数组改变；</span><br></pre></td></tr></table></figure></p>
<p>var ary=[];<br>ary.unshift(12);<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- `splice`</span><br></pre></td></tr></table></figure></p>
<p>splice(n,m)   从索引n开始删除m个元素，把删除的部分当作新数组返回，原有的数组改变<br>splice(n,m,x) 从索引n开始删除m个元素，把删除的部分当作新数组返回，并且用x替换原来位置的内容，原有的数组改变<br>splice(n,0,x) 把x添加到指定索引n之前；<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- `slice`</span><br></pre></td></tr></table></figure></p>
<p>slice(n,m)    从索引n开找到索引m处(不包含m)，将找到的内容放到新数组返回，原有的数组不变<br>slice(n)      从索引n处一直找到数组末尾；<br>slice(0)      数组克隆<br><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- `concat`  将两个数组进行拼接，原有数组不变</span><br></pre></td></tr></table></figure></p>
<p>ary1.concat(ary2)<br>ary1.concat() 相当于clice(0)也是克隆数组<br><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby"> <span class="string">`join`</span>  将数组按照指定的分隔符拆分字符串，原有的数组不变</span></span><br><span class="line"><span class="ruby">- <span class="string">`toString`</span>  将数组转化为字符串，原有的数组不变</span></span><br><span class="line"><span class="ruby">- <span class="string">`sort`</span>  数组排序的方法，原有数组改变，我们通常这样写，ary.sort(function(a,b)&#123;<span class="keyword">return</span> a-b;&#125;);来实现数组的升序排列 </span></span><br><span class="line"><span class="ruby">- <span class="string">`reverse`</span>  将数组倒过来排序，原来数组改变</span></span><br><span class="line"><span class="ruby">- <span class="string">`indexOf / lastIndexOf`</span>  获取数组中某一项的索引，通常用来检测数组中是否包含某一项内容，不包含返回的是-<span class="number">1</span>；这个方法在IE678下不兼容；</span></span><br><span class="line"><span class="ruby">- <span class="string">`forEach`</span>  循环数组中每一项，然后进行相关的操作，这个方法在IE678不兼容，</span></span><br></pre></td></tr></table></figure></p>
<p>ary.forEach(function(item,index,input){},context);第二个参数是指定函数中的this，不写默认是window<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- `<span class="built_in">map</span>`  循环数组中的每一项，然后进行相关的操作，相对于forEach来说，<span class="built_in">map</span>有返回值，可以修改数组中某一项，IE678不兼容，</span><br></pre></td></tr></table></figure></p>
<p>ary.map(function(item,index,input){},context);第二个参数是指定函数中的this，不写默认是window<br><code>`</code>  </p>
<ul>
<li><code>length</code>  返回数组的长度</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.juphy.com/2017/02/11/数组基础/" data-id="cjkkiiu8d000bawtuvjy23eg5" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Array/">Array</a></li></ul>

    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular/">Angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Array/">Array</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ES6/">ES6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Excel/">Excel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Function/">Function</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Number/">Number</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Object/">Object</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/String/">String</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Angular/" style="font-size: 10px;">Angular</a> <a href="/tags/Array/" style="font-size: 15px;">Array</a> <a href="/tags/ES6/" style="font-size: 20px;">ES6</a> <a href="/tags/Excel/" style="font-size: 10px;">Excel</a> <a href="/tags/Function/" style="font-size: 10px;">Function</a> <a href="/tags/Number/" style="font-size: 10px;">Number</a> <a href="/tags/Object/" style="font-size: 10px;">Object</a> <a href="/tags/String/" style="font-size: 10px;">String</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/06/20/Angular组件通信/">Angular组件通信</a>
          </li>
        
          <li>
            <a href="/2018/06/19/SheetJS/">SheetJS</a>
          </li>
        
          <li>
            <a href="/2018/06/16/centos7安装nginx/">centos7安装nginx</a>
          </li>
        
          <li>
            <a href="/2018/04/08/数组方法/">数组方法</a>
          </li>
        
          <li>
            <a href="/2018/03/25/数值方法/">数值方法</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Juphy<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>